{%- comment -%}
Three columned image and text section, initially copied from featured-columns.liquid
{%- endcomment -%}
<div>Good</div>
{%- if product.description != blank -%}
  {%- assign description_array = product.descrtiption | split: '//' -%}
  {%- assign highlights_title_array = description_array | slice: 1, 3 -%}
  {%- assign highlights_text_array = description_array | slice: 4, 6 -%}
{%- endif -%}
<div>Game</div>

<div id="section-{{ section.id }}" class="{{ section.settings.section_style }}" data-section-id="{{ section.id }}" data-section-type="highlights-section">
  <div class="box">
    <div class="wrapper">

      {%- unless section.settings.title == blank and section.settings.subtitle == blank -%}
        <div class="grid">
          <div class="grid__item large--eight-twelfths push--large--two-twelfths">
            <div class="section-header">
              {%- unless section.settings.title == blank -%}
                <h2 class="section-header__title">{{ section.settings.title | escape }}</h2>
              {%- endunless -%}
              {%- unless section.settings.subtitle == blank -%}
                <p class="section-header__subtitle">{{ section.settings.subtitle | escape }}</p>
              {%- endunless -%}
            </div>
           </div>
        </div>
      {%- endunless -%}

      {%- if section.blocks.size > 0 -%}
        <div class="grid grid-spacer {{ section.settings.text_align }}">

          {%- capture column_width -%}
            {%- render 'block-width' -%}
          {%- endcapture -%}
          
          {%- if section.blocks.size = 3 -%}
            {%- assign column_one = section.blocks[0] -%}
            {%- assign column_two = section.blocks[1] -%}
            {%- assign column_three = section.blocks[2] -%}

            <div class="grid__item {{ column_width }}" {{ column_one.shopify_attributes }}>
              {%- if column_one.settings.image != blank -%}
                <div class="media-wrapper spacer-bottom" style="padding-top: 100%">
                  {%- unless column_one.settings.image_link == blank -%} 
                    <a href="{{ column_one.settings.image_link }}"><img class="media lazyload"
                    {%- render 'lazysizes', img: column_one.settings.image, img_type: 'responsive' -%}
                                                                    alt="{{ column_one.settings.image.alt }}"></a>
                  {%- endunless -%}
                  {%- if column_one.settings.image_link == blank -%}
                    <img class="media lazyload"
                    {%- render 'lazysizes', img: column_one.settings.image, img_type: 'responsive' -%}
                                                                    alt="{{ column_one.settings.image.alt }}">
                  {%- endif -%}
                  
                </div>
              {%- elsif column_one.settings.icon != blank -%}
                <span class="{{settings.icon}} icon-xl text-secondary" aria-hidden="true">{{column_one.settings.icon}}</span>
              {%- else -%}
                {{ 'image' | placeholder_svg_tag: 'placeholder-svg spacer-bottom' }}
              {%- endif -%}

              <h3 class="h4">{{ highlights_title_array[0] }}</h3>
              <div class="rte">{{ highlights_text_array[0] }}</div>
              {%- unless column_one.settings.button_label == blank -%}
                <p><a href="{{ column_one.settings.image_link }}" class="btn btn--small {{ column_one.settings.button_style }}">
                  {{ column_one.settings.button_label | escape }}
                </a></p>
              {%- endunless -%}
            </div>

            <div class="grid__item {{ column_width }}" {{ column_two.shopify_attributes }}>
              {%- if column_two.settings.image != blank -%}
                <div class="media-wrapper spacer-bottom" style="padding-top: 100%">
                  {%- unless column_two.settings.image_link == blank -%} 
                    <a href="{{ column_two.settings.image_link }}"><img class="media lazyload"
                    {%- render 'lazysizes', img: column_two.settings.image, img_type: 'responsive' -%}
                                                                    alt="{{ column_two.settings.image.alt }}"></a>
                  {%- endunless -%}
                  {%- if column_two.settings.image_link == blank -%}
                    <img class="media lazyload"
                    {%- render 'lazysizes', img: column_two.settings.image, img_type: 'responsive' -%}
                                                                    alt="{{ column_two.settings.image.alt }}">
                  {%- endif -%}
                  
                </div>
              {%- elsif column_two.settings.icon != blank -%}
                <span class="{{settings.icon}} icon-xl text-secondary" aria-hidden="true">{{column_two.settings.icon}}</span>
              {%- else -%}
                {{ 'image' | placeholder_svg_tag: 'placeholder-svg spacer-bottom' }}
              {%- endif -%}

              <h3 class="h4">{{ highlights_title_array[1] }}</h3>
              <div class="rte">{{ highlights_text_array[1] }}</div>
              {%- unless column_two.settings.button_label == blank -%}
                <p><a href="{{ column_two.settings.image_link }}" class="btn btn--small {{ column_two.settings.button_style }}">
                  {{ column_two.settings.button_label | escape }}
                </a></p>
              {%- endunless -%}
            </div>

            <div class="grid__item {{ column_width }}" {{ column_three.shopify_attributes }}>
              {%- if column_three.settings.image != blank -%}
                <div class="media-wrapper spacer-bottom" style="padding-top: 100%">
                  {%- unless column_three.settings.image_link == blank -%} 
                    <a href="{{ column_three.settings.image_link }}"><img class="media lazyload"
                    {%- render 'lazysizes', img: column_three.settings.image, img_type: 'responsive' -%}
                                                                    alt="{{ column_three.settings.image.alt }}"></a>
                  {%- endunless -%}
                  {%- if column_three.settings.image_link == blank -%}
                    <img class="media lazyload"
                    {%- render 'lazysizes', img: column_three.settings.image, img_type: 'responsive' -%}
                                                                    alt="{{ column_three.settings.image.alt }}">
                  {%- endif -%}
                  
                </div>
              {%- elsif column_three.settings.icon != blank -%}
                <span class="{{settings.icon}} icon-xl text-secondary" aria-hidden="true">{{column_three.settings.icon}}</span>
              {%- else -%}
                {{ 'image' | placeholder_svg_tag: 'placeholder-svg spacer-bottom' }}
              {%- endif -%}

              <h3 class="h4">{{ highlights_title_array[2] }}</h3>
              <div class="rte">{{ highlights_text_array[2] }}</div>
              {%- unless column_three.settings.button_label == blank -%}
                <p><a href="{{ column_three.settings.image_link }}" class="btn btn--small {{ column_three.settings.button_style }}">
                  {{ column_three.settings.button_label | escape }}
                </a></p>
              {%- endunless -%}
            </div>
          {%- endif -%}

        </div>
      {%- else -%}
        {%- render 'no-blocks' -%}
      {%- endif -%}

    </div>
  </div>
</div>


{% schema %}
  {
    "name": "Product Highlights",
    "class": "highlights-section",
    "max_blocks": 4,
    "settings": [
	    {
        "type": "text",
        "id": "title",
        "label": "Heading",
        "default": "Highlights"
      },
	    {
        "type": "text",
        "id": "subtitle",
        "label": "Subheading"
      },
      {
        "type": "select",
        "id": "section_style",
        "label": "Section style",
        "default": "section-blank",
        "options": [
          {
            "value": "section-blank",
            "label": "Blank background"
          },
		      {
            "value": "section-default",
            "label": "Accent background"
          },
          {
            "value": "section-border",
            "label": "Border top"
          }
        ]
      },
	    {
        "type": "select",
        "id": "text_align",
        "label": "Text align",
        "default": "text-center",
        "options": [
          {
            "value": "",
            "label": "Left"
          },
          {
            "value": "text-center",
            "label": "Center"
          },
          {
            "value": "text-right",
            "label": "Right"
          }
        ]
      }
	  ],
	  "blocks" : [
	    {
        "type": "text_block",
        "name": "Column",
        "settings": [
          {
            "type": "range",
            "id": "column_number",
            "label": "Column Number",
            "min": 0,
            "max": 2,
            "step": 1,
          }
		      {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          },
          {
            "type": "text",
            "id": "icon",
            "label": "Icon",
            "info": "[View all available icons](https:\/\/material.io\/resources\/icons)"
          },
          {
            "type": "text",
            "id": "title",
            "label":"Heading",
            "default": "Add a title or tagline"
          },
          {
            "type": "richtext",
            "id": "text",
            "label": "Text",
            "default":"<p>Use this text to describe what makes your store stand out from others and why customers should buy from you.</p>"
          },
		      {
            "type": "select",
            "id": "button_style",
            "label": "Button style",
            "default": "btn--primary",
            "options": [
              {
                "value": "",
                "label": "Default"
              },
              {
                "value": "btn--primary",
                "label": "Full"
              },
              {
                "value": "btn-outline-primary",
                "label": "Outline"
              }
            ]
          },
          {
            "type": "text",
            "id": "button_label",
            "label": "Button label"
          },
          {
            "type": "url",
            "id": "image_link",
            "label": "Image Link"
          }
        ]
      }
    ],
	  "presets": [
      {
        "name":  "Text columns with images",
        "category": "Image and text",
		    "blocks": [
          {
            "type": "text_block"
          },
          {
            "type": "text_block"
          },
          {
            "type": "text_block"
          }
        ]
      }
    ]
  }
{% endschema %}
